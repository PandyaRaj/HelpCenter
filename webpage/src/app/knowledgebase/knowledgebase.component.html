<div class="fade-in">
  <!-- Header -->
  <div class="bg-white rounded-lg shadow-sm p-3 lg:p-6 mb-4 lg:mb-6">
    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3">
      <div>
        <h3 class="text-lg lg:text-xl font-bold text-gray-800">Knowledge Base Editor</h3>
        <p class="text-xs lg:text-sm text-gray-600 mt-1">Create and edit documentation using Markdown</p>
      </div>
      <div class="flex flex-wrap items-center gap-2">
        <button (click)="togglePreview()" class="flex-1 sm:flex-none px-3 lg:px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg text-sm lg:text-base font-medium transition-colors flex items-center justify-center space-x-2">
          <svg class="w-4 h-4 lg:w-5 lg:h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
          </svg>
          <span class="hidden sm:inline">{{ showPreview ? 'Hide' : 'Show' }} Preview</span>
          <span class="sm:hidden">Preview</span>
        </button>
        <button (click)="insertTemplate()" class="flex-1 sm:flex-none px-3 lg:px-4 py-2 bg-blue-100 hover:bg-blue-200 text-blue-700 rounded-lg text-sm lg:text-base font-medium transition-colors flex items-center justify-center space-x-2">
          <svg class="w-4 h-4 lg:w-5 lg:h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
          </svg>
          <span class="hidden sm:inline">Template</span>
        </button>
        <button (click)="saveContent()" class="flex-1 sm:flex-none px-3 lg:px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg text-sm lg:text-base font-medium transition-colors flex items-center justify-center space-x-2">
          <svg class="w-4 h-4 lg:w-5 lg:h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"></path>
          </svg>
          <span>Save</span>
        </button>
      </div>
    </div>

    <!-- Save Message -->
    <div *ngIf="saveMessage" class="mt-3 lg:mt-4 p-2 lg:p-3 bg-green-50 border border-green-200 rounded-lg fade-in">
      <p class="text-xs lg:text-sm text-green-700 font-medium">âœ“ {{ saveMessage }}</p>
    </div>
  </div>

  <!-- Editor/Preview -->
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-3 lg:gap-6">
    <!-- Editor -->
    <div class="bg-white rounded-lg shadow-sm p-3 lg:p-6">
      <div class="flex items-center justify-between mb-3 lg:mb-4">
        <h4 class="text-base lg:text-lg font-semibold text-gray-800">Markdown Editor</h4>
        <button (click)="clearContent()" class="text-xs lg:text-sm text-red-600 hover:text-red-700 font-medium">
          Clear
        </button>
      </div>
      <textarea [(ngModel)]="markdownContent" 
                (ngModelChange)="updatePreview()" 
                placeholder="Write your markdown content here..."
                class="w-full h-[300px] lg:h-[600px] p-3 lg:p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-xs lg:text-sm resize-none"></textarea>
      
      <!-- Markdown Hints -->
      <div class="mt-3 lg:mt-4 p-3 lg:p-4 bg-gray-50 rounded-lg">
        <p class="text-xs text-gray-600 font-semibold mb-2">Quick Tips:</p>
        <div class="grid grid-cols-2 gap-1 lg:gap-2 text-[10px] lg:text-xs text-gray-600">
          <div><code class="bg-white px-1 py-0.5 rounded">#</code> = Heading 1</div>
          <div><code class="bg-white px-1 py-0.5 rounded">**text**</code> = Bold</div>
          <div><code class="bg-white px-1 py-0.5 rounded">##</code> = Heading 2</div>
          <div><code class="bg-white px-1 py-0.5 rounded">*text*</code> = Italic</div>
          <div><code class="bg-white px-1 py-0.5 rounded">-</code> = Bullet list</div>
          <div><code class="bg-white px-1 py-0.5 rounded">`code`</code> = Inline code</div>
        </div>
      </div>
    </div>

    <!-- Preview -->
    <div *ngIf="showPreview" class="bg-white rounded-lg shadow-sm p-3 lg:p-6">
      <h4 class="text-base lg:text-lg font-semibold text-gray-800 mb-3 lg:mb-4">Preview</h4>
      <div class="prose prose-sm max-w-none overflow-y-auto h-[300px] lg:h-[600px] markdown-preview text-sm lg:text-base" [innerHTML]="previewHtml"></div>
    </div>
  </div>
</div>
